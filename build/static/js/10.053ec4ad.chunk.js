(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[10,11,13],{52:function(t,e,n){"use strict";n.r(e),n.d(e,"Media",(function(){return o}));var r=n(0),a=n.n(r);function c(t){return t.src?a.a.createElement("img",{src:t.src,alt:"upload to cloud"}):null}function o(t){var e=t.contentState.getEntity(t.block.getEntityAt(0)),n=e.getData().src,r=e.getType(),o=a.a.createElement(a.a.Fragment,null);return"image"===r&&(o=a.a.createElement(c,{src:n})),o}},58:function(t,e,n){"use strict";n.r(e),n.d(e,"mediaBlockRenderer",(function(){return a}));var r=n(52);function a(t){return"atomic"===t.getType()?{component:r.Media,editable:!1}:null}},70:function(t,e,n){"use strict";n.r(e),n.d(e,"RichEditor",(function(){return g}));var r=n(8),a=n(0),c=n.n(a),o=n(151),i=n(63),d=n(4),u=n(58),l=n(13),s=n(9),m=n(31);function g(t){var e=Object(a.useContext)(d.a),n=e.data,g=e.dataDispatch,h=new m.a(g),b=t.blogId?n.blogs.filter((function(e){return e.id===t.blogId.id}))[0]:null,f=b?o.EditorState.createWithContent(Object(o.convertFromRaw)(JSON.parse(b.content))):o.EditorState.createEmpty(),p=Object(a.useState)(f),y=Object(r.a)(p,2),E=y[0],v=y[1],C=E.getCurrentContent(),O=Object(a.useState)(JSON.stringify(Object(o.convertToRaw)(C))),S=Object(r.a)(O,2),k=S[0],R=S[1],j=Object(l.g)(),T=Object(a.createRef)(),w=function(){T.current&&T.current.focus()},B=function(t){v(t),R(JSON.stringify(Object(o.convertToRaw)(C)))},I=E.getCurrentContent(),N="RichEditor-editor";return I.hasText()||"unstyled"!==I.getBlockMap().first().getType()&&(N+=" RichEditor-hidePlaceholder"),c.a.createElement("div",{className:"editor"},c.a.createElement("div",{className:"RichEditor"},c.a.createElement(i.Toolbar,{variant:t.blogId?"Save":"Publish",onAddImage:function(t){var e="https://res.cloudinary.com/".concat("maryam47web","/image/upload/").concat(t,".jpg"),n=E.getCurrentContent().createEntity("image","IMMUTABLE",{src:e}),r=n.getLastCreatedEntityKey(),a=o.EditorState.set(E,{currentContent:n});v(o.AtomicBlockUtils.insertAtomicBlock(a,r," ")),setTimeout((function(){return w()}),0)},editorState:E,handleChange:B,handleSave:function(e){return function(){"Publish"===e?(h.createNewPost({content:k,userId:n.users[0]._id}),j.push("/dashboard/posts")):(h.updatePost(t.blogId.id,k),j.push("/dashboard/posts"))}}}),c.a.createElement("div",{className:N,onClick:w},c.a.createElement(o.Editor,{ref:T,blockStyleFn:s.f,blockRendererFn:u.mediaBlockRenderer,editorState:E,handleKeyCommand:function(t,e){var n=o.RichUtils.handleKeyCommand(e,t);return n?(B(n),"handled"):"not-handled"},keyBindingFn:function(t){if(9===t.keyCode){var e=o.RichUtils.onTab(t,E,4);return e!==E&&B(e),null}return Object(o.getDefaultKeyBinding)(t)},onChange:B,placeholder:"Tell a story..."}))))}}}]);
//# sourceMappingURL=10.053ec4ad.chunk.js.map