(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[2,3,4,5,18,19,20,21,22],{126:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return l}));var a=function(e){return new Intl.DateTimeFormat("en-us",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(e))},r=function(e){return new Intl.DateTimeFormat("en-us",{hour:"numeric",minute:"numeric"}).format(new Date(e))},c=function(e){return e.match(/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-\\.]+)\.([a-zA-Z]{2,5})$/)},i=function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";case"unstyled":return"RichEditor-paragraph";case"CODE":return"RichEditor-blockcode";case"STRIKETHROUGH":return"RichEditor-strikethrough";default:return""}},o=function(e){var t=JSON.parse(e),n=t.blocks.filter((function(e){return e.text.length})),a=n.filter((function(e){return"header-one"===e.type}))[0],r=n.filter((function(e){return"unstyled"===e.type}))[0],c=t.entityMap[0]?t.entityMap[0].data.src:null;return{title:a.text,p:r.text,url:c}},l=function(e){var t=JSON.parse(e).blocks,n=t.filter((function(e){return"header-one"===e.type}))[0],a=t.filter((function(e){return"unstyled"===e.type})).filter((function(e){return e.text.length>1}));return void 0!==n&&a.length>0}},130:function(e,t,n){e.exports=n.p+"static/media/bubble.3eaa3469.svg"},131:function(e,t,n){e.exports=n.p+"static/media/linkedin-2.4c13d5e4.svg"},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),c=n(27),i=document.createElement("portal");function o(e){var t=e.toggleModal,n=e.children;return Object(a.useEffect)((function(){return document.body.appendChild(i),function(){document.body.removeChild(i)}}),[]),Object(c.createPortal)(r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__overlay",onClick:t}),r.a.createElement("div",{className:"modal__body"},n)),i)}},140:function(e,t,n){e.exports=n.p+"static/media/facebook-2.51f42ec5.svg"},141:function(e,t,n){e.exports=n.p+"static/media/linkedin-4.8cc2d3a8.svg"},142:function(e,t,n){e.exports=n.p+"static/media/save.70f9c9cd.svg"},143:function(e,t,n){e.exports=n.p+"static/media/twitter-2.9a35c67b.svg"},150:function(e,t,n){var a={"./Blockquote.svg":151,"./Bold.svg":152,"./CodeBlock.svg":153,"./Image.svg":154,"./Italic.svg":155,"./Monospace.svg":156,"./OL.svg":157,"./Strike.svg":158,"./UL.svg":159,"./Underline.svg":160,"./angel-up.svg":161,"./bubble.svg":130,"./clock-thin.svg":162,"./comment.svg":163,"./facebook-2.svg":140,"./iconCheck.svg":164,"./linkedin-2.svg":131,"./linkedin-4.svg":141,"./save.svg":142,"./time-3.svg":165,"./twitter-2.svg":143,"./user.svg":166};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=150},151:function(e,t,n){e.exports=n.p+"static/media/Blockquote.5244267c.svg"},152:function(e,t,n){e.exports=n.p+"static/media/Bold.24e86c54.svg"},153:function(e,t,n){e.exports=n.p+"static/media/CodeBlock.a2745814.svg"},154:function(e,t,n){e.exports=n.p+"static/media/Image.0195355f.svg"},155:function(e,t,n){e.exports=n.p+"static/media/Italic.431c4f8a.svg"},156:function(e,t,n){e.exports=n.p+"static/media/Monospace.a4c355c1.svg"},157:function(e,t,n){e.exports=n.p+"static/media/OL.735619e1.svg"},158:function(e,t,n){e.exports=n.p+"static/media/Strike.e35d7f33.svg"},159:function(e,t,n){e.exports=n.p+"static/media/UL.ff2d3d11.svg"},160:function(e,t,n){e.exports=n.p+"static/media/Underline.2f0cc38b.svg"},161:function(e,t,n){e.exports=n.p+"static/media/angel-up.7b28dc10.svg"},162:function(e,t,n){e.exports=n.p+"static/media/clock-thin.565fe25f.svg"},163:function(e,t,n){e.exports=n.p+"static/media/comment.808af9ea.svg"},164:function(e,t,n){e.exports=n.p+"static/media/iconCheck.a0b8efcf.svg"},165:function(e,t,n){e.exports=n.p+"static/media/time-3.9c3f305b.svg"},166:function(e,t,n){e.exports=n.p+"static/media/user.8702dc53.svg"},45:function(e,t,n){"use strict";n.r(t),n.d(t,"Picture",(function(){return c}));var a=n(0),r=n.n(a);function c(e){var t=e.imgUrl,n=e.publicId,a=e.handleClick,c=e.checked;return r.a.createElement("div",{className:"picture",key:n,onClick:a(n)},r.a.createElement("img",{className:"picture__image",src:t,alt:"pic"}),r.a.createElement("input",{type:"checkbox",readOnly:!0,checked:c,className:"picture__checked"}))}},46:function(e,t,n){"use strict";n.r(t),n.d(t,"HeaderStyleDropdown",(function(){return c}));var a=n(0),r=n.n(a);function c(e){var t=e.onToggle,n=e.active,a=e.headerOptions;return r.a.createElement("div",{className:"RichEditor-headers"},r.a.createElement("select",{className:"RichEditor-headers-select",value:n,onChange:function(e){var n=e.target.value;t(n)}},r.a.createElement("option",{className:"RichEditor-headers-option",key:"unstyled",value:"unstyled"},"Normal"),a.map((function(e){return r.a.createElement("option",{className:"RichEditor-headers-option",key:e.label,value:e.style},e.label)}))))}},47:function(e,t,n){"use strict";n.r(t),n.d(t,"StyleButton",(function(){return l}));var a=n(16),r=n(0),c=n.n(r),i=n(20),o=n.n(i);function l(e){var t,r=e.active,i=e.style,l=e.onToggle,s=e.label;return c.a.createElement("span",{className:o()("RichEditor-styleButton",(t={},Object(a.a)(t,"RichEditor-styleButton-".concat(s),!0),Object(a.a)(t,"RichEditor-activeButton",r),t)),onMouseDown:function(e){e.preventDefault(),l(i)}},c.a.createElement("img",{className:"RichEditor-styleButton-icon",src:n(150)("./".concat(s,".svg")),alt:"icon"}))}},50:function(e,t,n){"use strict";n.r(t),n.d(t,"Gallery",(function(){return g}));var a=n(21),r=n.n(a),c=n(29),i=n(16),o=n(1),l=n(12),s=n(0),u=n.n(s),d=n(25),m=n(45),p=n(11),f=n(26);function g(e){var t=Object(s.useContext)(p.a),n=t.data.gallery,a=t.dataDispatch,g=new f.a(a),y=n.reduce((function(e,t){return e[t.public_id]=!1,e}),[]),v=Object(s.useState)(y),b=Object(l.a)(v,2),h=b[0],E=b[1],k=function(){window.cloudinary.openUploadWidget({cloudName:"maryam47web",uploadPreset:"no2bkme1",tags:["xmas"]},(function(e,t){"success"===t.event&&a({type:"ADD_GALLERY",payload:t.info})}))},C=function(t){return function(){e.withCb&&e.cb(t),E(Object(o.a)({},h,Object(i.a)({},t,!h[t])))}},O=n.reduce((function(e,t){return h[t.public_id]&&e.push(t.public_id),e}),[]),T=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.removeImage(O[0]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("div",{className:"gallery"},n.length?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(d.a,{text:"Add",handleClick:k}),O[0]&&u.a.createElement(d.a,{text:O.length>1?"Delete all":"Delete",handleClick:T})),u.a.createElement("div",{className:"gallery__contents"},n.map((function(e){return u.a.createElement(m.Picture,{checked:h[e.public_id],handleClick:C,key:e.public_id,publicId:e.public_id,imgUrl:"https://res.cloudinary.com/".concat("maryam47web","/image/upload/").concat(e.public_id,".jpg")})})))):u.a.createElement("div",{className:"gallery__empty"},"The gallery is empty! ",u.a.createElement(d.a,{text:"Add picture",handleClick:k})," "))}},51:function(e,t,n){"use strict";n.r(t),n.d(t,"Media",(function(){return i}));var a=n(0),r=n.n(a);function c(e){return e.src?r.a.createElement("img",{src:e.src,alt:"upload to cloud"}):null}function i(e){var t=e.contentState.getEntity(e.block.getEntityAt(0)),n=t.getData().src,a=t.getType(),i=r.a.createElement(r.a.Fragment,null);return"image"===a&&(i=r.a.createElement(c,{src:n})),i}},52:function(e,t,n){"use strict";n.r(t),n.d(t,"StyleTypes",(function(){return s}));var a=n(0),r=n.n(a),c=n(46),i=n(47),o=[{label:"Bold",style:"BOLD",type:"INLINE_TYPE"},{label:"Italic",style:"ITALIC",type:"INLINE_TYPE"},{label:"Underline",style:"UNDERLINE",type:"INLINE_TYPE"},{label:"UL",style:"unordered-list-item",type:"BLOCK_TYPE"},{label:"OL",style:"ordered-list-item",type:"BLOCK_TYPE"},{label:"Blockquote",style:"blockquote",type:"BLOCK_TYPE"},{label:"CodeBlock",style:"code-block",type:"BLOCK_TYPE"},{label:"Monospace",style:"CODE",type:"INLINE_TYPE"},{label:"Strike",style:"STRIKETHROUGH",type:"INLINE_TYPE"},{label:"Image",style:"image",type:"IMAGE"}],l=[{label:"Heading 1",style:"header-one",type:"BLOCK_TYPE"},{label:"Heading 2",style:"header-two",type:"BLOCK_TYPE"},{label:"Heading 3",style:"header-three",type:"BLOCK_TYPE"},{label:"Heading 4",style:"header-four",type:"BLOCK_TYPE"},{label:"Heading 5",style:"header-five",type:"BLOCK_TYPE"},{label:"Heading 6",style:"header-six",type:"BLOCK_TYPE"}];function s(e){var t=e.editorState,n=e.onToggleBlock,a=e.onToggleInline,s=t.getSelection(),u=t.getCurrentContent().getBlockForKey(s.getStartKey()).getType(),d=t.getCurrentInlineStyle();return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.HeaderStyleDropdown,{headerOptions:l,active:u,onToggle:n}),o.map((function(e){return r.a.createElement(i.StyleButton,{active:"BLOCK_TYPE"===e.type?e.style===u:d.has(e.style),label:e.label,onToggle:"BLOCK_TYPE"===e.type?n:a,style:e.style,key:e.label})})))}},55:function(e,t,n){"use strict";n.r(t),n.d(t,"mediaBlockRenderer",(function(){return r}));var a=n(51);function r(e){return"atomic"===e.getType()?{component:a.Media,editable:!1}:null}},57:function(e,t,n){"use strict";n.r(t),n.d(t,"Toolbar",(function(){return g}));var a=n(12),r=n(0),c=n.n(r),i=n(167),o=n(20),l=n.n(o),s=n(25),u=n(52),d=n(137),m=n(50),p=n(142),f=n.n(p);function g(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),o=n[0],p=n[1],g=Object(r.useState)(!1),y=Object(a.a)(g,2),v=y[0],b=y[1],h=e.editorState,E=e.handleChange,k=e.onAddImage,C=e.handleSave,O=e.draft;return c.a.createElement("div",{className:"toolbar"},c.a.createElement("div",{className:"RichEditor-controls"},c.a.createElement(u.StyleTypes,{editorState:h,onToggleBlock:function(e){E(i.RichUtils.toggleBlockType(h,e))},onToggleInline:function(e){"image"===e&&p(!o),E(i.RichUtils.toggleInlineStyle(h,e))}})),c.a.createElement("div",{className:"toolbar__toggle",onClick:function(){return b(!v)}},c.a.createElement("img",{src:f.a,alt:"menu"})),c.a.createElement("div",{className:l()({toolbar__buttons:!0,"toolbar__buttons-hide":!v})},c.a.createElement(s.a,{text:O?"save":"draft",handleClick:C("save")}),c.a.createElement(s.a,{text:"publish",handleClick:C("publish")})),o&&c.a.createElement(d.a,{toggleModal:function(){return p(!o)}},c.a.createElement(m.Gallery,{withCb:!0,cb:function(e){k(e),p(!1)}})))}},69:function(e,t,n){"use strict";n.r(t),n.d(t,"RichEditor",(function(){return f}));var a=n(1),r=n(12),c=n(0),i=n.n(c),o=n(167),l=n(57),s=n(11),u=n(55),d=n(8),m=n(126),p=n(26);function f(e){var t=e.match.params.postId,n=Object(c.useContext)(s.a),f=n.data,g=n.dataDispatch,y=new p.a(g),v=t?f.blogs.filter((function(e){return e.id===t}))[0]:null,b=v?o.EditorState.createWithContent(Object(o.convertFromRaw)(JSON.parse(v.content))):o.EditorState.createEmpty(),h=Object(c.useState)(b),E=Object(r.a)(h,2),k=E[0],C=E[1],O=Object(d.g)(),T=Object(c.createRef)(),_=function(){T.current&&T.current.focus()},N=function(e){C(e)},x=k.getCurrentContent(),B="RichEditor-editor";return x.hasText()||"unstyled"!==x.getBlockMap().first().getType()&&(B+=" RichEditor-hidePlaceholder"),i.a.createElement("div",{className:"editor"},i.a.createElement("div",{className:"RichEditor"},i.a.createElement(l.Toolbar,{draft:v&&v.draft||!1,onAddImage:function(e){var t="https://res.cloudinary.com/".concat("maryam47web","/image/upload/").concat(e,".jpg"),n=k.getCurrentContent().createEntity("image","IMMUTABLE",{src:t}),a=n.getLastCreatedEntityKey(),r=o.EditorState.set(k,{currentContent:n});C(o.AtomicBlockUtils.insertAtomicBlock(r,a," ")),setTimeout((function(){return _()}),0)},editorState:k,handleChange:N,handleSave:function(e){return function(){console.log(e);var n=k.getCurrentContent(),r=JSON.stringify(Object(o.convertToRaw)(n));Object(m.f)(r)?t?v&&"save"===e?y.updatePost(t,Object(a.a)({},v,{content:r,draft:!0})):v&&"publish"===e&&y.updatePost(t,Object(a.a)({},v,{content:r,draft:!1})):y.createNewPost({content:r,userId:f.users[0]._id,draft:"draft"===e}):_(),O.push("/dashboard")}}}),i.a.createElement("div",{className:B,onClick:_},i.a.createElement(o.Editor,{ref:T,blockStyleFn:m.e,blockRendererFn:u.mediaBlockRenderer,editorState:k,handleKeyCommand:function(e,t){var n=o.RichUtils.handleKeyCommand(t,e);return n?(N(n),"handled"):"not-handled"},keyBindingFn:function(e){if(9===e.keyCode){var t=o.RichUtils.onTab(e,k,4);return t!==k&&N(t),null}return Object(o.getDefaultKeyBinding)(e)},onChange:N,placeholder:"Tell a story..."}))))}}}]);
//# sourceMappingURL=2.e75819e9.chunk.js.map