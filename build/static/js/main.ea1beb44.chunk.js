(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[79],{10:function(e,a,t){"use strict";t.r(a);var o=t(72),n=t(0),s=t.n(n),r=t(2),c=t(14),d=t(13),i=function(e){return Object(n.lazy)((function(){return t(135)("./".concat(e))}))},l=i("Blog"),u=i("Post"),p=i("Login"),b=i("Home"),h=i("About"),g=i("Dashboard"),y=i("Dashboard/Gallery"),m=i("Dashboard/Profile"),f=i("Dashboard/Editor"),x=i("Dashboard/PostTable");a.default=function(){var e=Object(n.useContext)(c.a),a=e.authState.isLoggedIn,t=e.authService,i=Object(n.useContext)(d.a).dataService;return Object(n.useEffect)((function(){t.authenticate(),i.getPosts(),i.getGallery(),i.getUsers()}),[]),s.a.createElement(n.Suspense,{fallback:s.a.createElement("div",null)},s.a.createElement(r.d,null,s.a.createElement(r.b,{exact:!0,path:"/",component:b}),s.a.createElement(r.b,{exact:!0,path:"/login",component:p}),s.a.createElement(r.b,{exact:!0,path:"/about",component:h}),s.a.createElement(r.b,{exact:!0,path:"/blog",component:l}),s.a.createElement(r.b,{exact:!0,path:"/blog/:id",component:function(e){return e?s.a.createElement(u,e):null}}),s.a.createElement((function(e){var t=e.component,n=e.path,c=Object(o.a)(e,["component","path"]);return s.a.createElement(r.b,{path:n,render:function(e){return a?s.a.createElement(t,Object.assign({},e,c)):s.a.createElement(r.a,{to:{pathname:"/login",state:{from:e.location}}})}})}),{path:"/dashboard",component:function(e){var a=e.match.url;return s.a.createElement(g,null,s.a.createElement(r.b,{path:"".concat(a,"/profile"),component:m,exact:!0}),s.a.createElement(r.b,{path:"".concat(a,"/gallery"),component:y,exact:!0}),s.a.createElement(r.b,{path:"".concat(a,"/create"),component:f,exact:!0}),s.a.createElement(r.b,{path:"".concat(a,"/edit/:id"),component:function(e){var a=e.match;return s.a.createElement(f,{blogId:a.params})},exact:!0}),s.a.createElement(r.b,{path:"".concat(a,"/posts"),component:x,exact:!0}))}})))}},114:function(e,a,t){e.exports=t(141)},13:function(e,a,t){"use strict";var o=t(12),n=t(0),s=t.n(n),r=t(1),c={isFetched:!1,blogs:[],users:[],gallery:[]};var d=function(e,a){switch(console.log(a),a.type){case"FETCH_USERS":return Object(r.a)({},e,{users:a.payload});case"UPDATE_USER":return Object(r.a)({},e,{users:e.users.map((function(e){return e._id!==a.payload.userId?e:a.payload}))});case"UPDATE_USER_IMAGE":var t=e.users.filter((function(e){return e._id===a.payload.userId}))[0];return t.imageUrl=a.payload.obj.imageUrl,Object(r.a)({},e,{users:e.users.map((function(e){return e._id!==a.payload.userId?e:t}))});case"FETCH_POSTS":return Object(r.a)({},e,{blogs:(s=a.payload,s.sort((function(e,a){return Number(new Date(a.createdAt))-Number(new Date(e.createdAt))})))});case"POSTS_FECHED":return Object(r.a)({},e,{isFetched:!0});case"FETCH_GALLERY":return Object(r.a)({},e,{gallery:a.payload});case"SET_AVATAR":return Object(r.a)({},e);case"ADD_GALLERY":return Object(r.a)({},e,{gallery:e.gallery.concat(a.payload)});case"ADD_POST":return Object(r.a)({},e,{blogs:e.blogs.concat(a.payload)});case"EDIT_POST":return Object(r.a)({},e,{blogs:e.blogs.map((function(e){return e.id!==a.payload.id?e:a.payload}))});case"REMOVE_POST":return Object(r.a)({},e,{blogs:e.blogs.filter((function(e){return e.id!==a.payload}))});case"REMOVE_IMAGE":return Object(r.a)({},e,{gallery:e.gallery.filter((function(e){return e.public_id!==a.payload}))});case"ADD_COMMENT":var o=e.blogs.filter((function(e){return e.id===a.payload.post}))[0];return o.comments=o.comments.concat(a.payload),Object(r.a)({},e,{blogs:e.blogs.map((function(e){return e.id===a.payload._id?o:e}))});case"REMOVE_COMMENT":var n=e.blogs.filter((function(e){return e.id===a.payload.post}))[0];return n.comments=n.comments.filter((function(e){return e._id!==a.payload._id})),Object(r.a)({},e,{blogs:e.blogs.map((function(e){return e.id===a.payload.post?n:e}))});case"ERROR_MESSAGE":return Object(r.a)({},e);default:return function(e){throw new Error("Unexpected object: "+e)}(a)}var s},i=t(15),l=t.n(i),u=t(4);t.d(a,"a",(function(){return p})),t.d(a,"b",(function(){return b}));var p=Object(n.createContext)({}),b=function(e){var a,t=e.children,r=Object(n.useReducer)(d,c),i=Object(o.a)(r,2),b=i[0],h=i[1],g={data:b,dataDispatch:h,dataService:(a=h,{getPosts:function(){u.a.get("/posts").then((function(e){a({type:"FETCH_POSTS",payload:e.data})})).catch((function(e){console.log(e)}))},getGallery:function(){l.a.get("https://res.cloudinary.com/".concat("maryam47web","/image/list/xmas.json")).then((function(e){a({type:"FETCH_GALLERY",payload:e.data.resources})})).catch((function(e){console.log(e)}))},createNewPost:function(e){u.a.post("/posts",e).then((function(e){a({type:"ADD_POST",payload:e.data})})).catch((function(e){console.log(e)}))},updatePost:function(e,t){u.a.put("/posts/".concat(e),{content:t}).then((function(e){a({type:"EDIT_POST",payload:e.data})})).catch((function(e){console.log(e)}))},removePost:function(e){u.a.delete("/posts/".concat(e)).then((function(){a({type:"REMOVE_POST",payload:e})}))},getUsers:function(){u.a.get("/users").then((function(e){a({type:"FETCH_USERS",payload:e.data})}))},updateUser:function(e,t,o){console.log(t),u.a.put("/users/".concat(e),{obj:t,publicId:o}).then((function(e){e.data._id?a({type:"UPDATE_USER",payload:e.data}):a({type:"ERROR_MESSAGE",payload:e.data})})).catch((function(e){console.log(e)}))},removeAssets:function(e){u.a.post("/assets",e).then((function(e){console.log(e.data)}))},removeImage:function(e){u.a.delete("/assets/".concat(e)).then((function(){a({type:"REMOVE_IMAGE",payload:e})}))},addComment:function(e){u.a.post("/comments",e).then((function(e){a({type:"ADD_COMMENT",payload:e.data})})).catch((function(e){console.log(e)}))},removeComment:function(e){u.a.delete("/comments/".concat(e)).then((function(e){a({type:"REMOVE_COMMENT",payload:e.data})})).catch((function(e){console.log(e)}))}})};return s.a.createElement(p.Provider,{value:g},t)}},135:function(e,a,t){var o={"./About":[43,9,9],"./About/":[43,9,9],"./About/_style.scss":[142,7,82],"./About/index":[43,9,9],"./About/index.tsx":[43,9,9],"./About/package":[76,3,40],"./About/package.json":[76,3,40],"./AddComment":[27,9,29],"./AddComment/":[27,9,29],"./AddComment/index":[27,9,29],"./AddComment/index.tsx":[27,9,29],"./AddComment/package":[77,3,41],"./AddComment/package.json":[77,3,41],"./App":[10,9],"./App/":[10,9],"./App/index":[10,9],"./App/index.tsx":[10,9],"./App/package":[78,3,42],"./App/package.json":[78,3,42],"./Author":[44,9,31],"./Author/":[44,9,31],"./Author/_style.scss":[143,7,99],"./Author/index":[44,9,31],"./Author/index.tsx":[44,9,31],"./Author/package":[79,3,43],"./Author/package.json":[79,3,43],"./Blog":[45,9,6],"./Blog/":[45,9,6],"./Blog/index":[45,9,6],"./Blog/index.tsx":[45,9,6],"./Blog/package":[80,3,44],"./Blog/package.json":[80,3,44],"./BlogBody":[34,9,12],"./BlogBody/":[34,9,12],"./BlogBody/_style.scss":[144,7,83],"./BlogBody/index":[34,9,12],"./BlogBody/index.tsx":[34,9,12],"./BlogBody/package":[81,3,45],"./BlogBody/package.json":[81,3,45],"./Button":[16,9,32],"./Button/":[16,9,32],"./Button/_style.scss":[145,7,84],"./Button/index":[16,9,32],"./Button/index.tsx":[16,9,32],"./Button/package":[82,3,46],"./Button/package.json":[82,3,46],"./CardPost":[29,9,17],"./CardPost/":[29,9,17],"./CardPost/_style.scss":[146,7,85],"./CardPost/index":[29,9,17],"./CardPost/index.tsx":[29,9,17],"./CardPost/package":[83,3,47],"./CardPost/package.json":[83,3,47],"./Comment":[35,9,18],"./Comment/":[35,9,18],"./Comment/_style.scss":[147,7,100],"./Comment/index":[35,9,18],"./Comment/index.tsx":[35,9,18],"./Comment/package":[84,3,48],"./Comment/package.json":[84,3,48],"./Dashboard":[50,9,20],"./Dashboard/":[50,9,20],"./Dashboard/CommentList":[36,9,24],"./Dashboard/CommentList/":[36,9,24],"./Dashboard/CommentList/_style.scss":[148,7,101],"./Dashboard/CommentList/index":[36,9,24],"./Dashboard/CommentList/index.tsx":[36,9,24],"./Dashboard/CommentList/package":[85,3,49],"./Dashboard/CommentList/package.json":[85,3,49],"./Dashboard/Editor":[46,9,0,2],"./Dashboard/Editor/":[46,9,0,2],"./Dashboard/Editor/_style.scss":[149,7,102],"./Dashboard/Editor/index":[46,9,0,2],"./Dashboard/Editor/index.tsx":[46,9,0,2],"./Dashboard/Editor/package":[86,3,50],"./Dashboard/Editor/package.json":[86,3,50],"./Dashboard/Gallery":[31,9,25],"./Dashboard/Gallery/":[31,9,25],"./Dashboard/Gallery/_style.scss":[150,7,103],"./Dashboard/Gallery/index":[31,9,25],"./Dashboard/Gallery/index.tsx":[31,9,25],"./Dashboard/Gallery/package":[87,3,51],"./Dashboard/Gallery/package.json":[87,3,51],"./Dashboard/HeaderStyleDropdown":[23,9,33],"./Dashboard/HeaderStyleDropdown/":[23,9,33],"./Dashboard/HeaderStyleDropdown/index":[23,9,33],"./Dashboard/HeaderStyleDropdown/index.tsx":[23,9,33],"./Dashboard/HeaderStyleDropdown/package":[88,3,52],"./Dashboard/HeaderStyleDropdown/package.json":[88,3,52],"./Dashboard/Media":[32,9,34],"./Dashboard/Media/":[32,9,34],"./Dashboard/Media/index":[32,9,34],"./Dashboard/Media/index.tsx":[32,9,34],"./Dashboard/Media/package":[89,3,53],"./Dashboard/Media/package.json":[89,3,53],"./Dashboard/MediaBlockRenderer":[38,9,30],"./Dashboard/MediaBlockRenderer/":[38,9,30],"./Dashboard/MediaBlockRenderer/index":[38,9,30],"./Dashboard/MediaBlockRenderer/index.tsx":[38,9,30],"./Dashboard/MediaBlockRenderer/package":[90,3,54],"./Dashboard/MediaBlockRenderer/package.json":[90,3,54],"./Dashboard/Nav":[42,9,26],"./Dashboard/Nav/":[42,9,26],"./Dashboard/Nav/_style.scss":[151,7,86],"./Dashboard/Nav/index":[42,9,26],"./Dashboard/Nav/index.tsx":[42,9,26],"./Dashboard/Nav/package":[91,3,55],"./Dashboard/Nav/package.json":[91,3,55],"./Dashboard/PctureChoice":[25,9,35],"./Dashboard/PctureChoice/":[25,9,35],"./Dashboard/PctureChoice/_style.scss":[152,7,104],"./Dashboard/PctureChoice/index":[25,9,35],"./Dashboard/PctureChoice/index.tsx":[25,9,35],"./Dashboard/PctureChoice/package":[92,3,56],"./Dashboard/PctureChoice/package.json":[92,3,56],"./Dashboard/PostTable":[47,9,13],"./Dashboard/PostTable/":[47,9,13],"./Dashboard/PostTable/_style.scss":[153,7,87],"./Dashboard/PostTable/index":[47,9,13],"./Dashboard/PostTable/index.tsx":[47,9,13],"./Dashboard/PostTable/package":[93,3,57],"./Dashboard/PostTable/package.json":[93,3,57],"./Dashboard/Preview":[48,9,0,1,21],"./Dashboard/Preview/":[48,9,0,1,21],"./Dashboard/Preview/index":[48,9,0,1,21],"./Dashboard/Preview/index.tsx":[48,9,0,1,21],"./Dashboard/Preview/package":[94,3,58],"./Dashboard/Preview/package.json":[94,3,58],"./Dashboard/Profile":[49,9,11],"./Dashboard/Profile/":[49,9,11],"./Dashboard/Profile/_style.scss":[154,7,88],"./Dashboard/Profile/index":[49,9,11],"./Dashboard/Profile/index.tsx":[49,9,11],"./Dashboard/Profile/package":[95,3,59],"./Dashboard/Profile/package.json":[95,3,59],"./Dashboard/StyleButton":[24,9,5],"./Dashboard/StyleButton/":[24,9,5],"./Dashboard/StyleButton/index":[24,9,5],"./Dashboard/StyleButton/index.tsx":[24,9,5],"./Dashboard/StyleButton/package":[96,3,60],"./Dashboard/StyleButton/package.json":[96,3,60],"./Dashboard/StyleTypes":[30,9,4],"./Dashboard/StyleTypes/":[30,9,4],"./Dashboard/StyleTypes/index":[30,9,4],"./Dashboard/StyleTypes/index.tsx":[30,9,4],"./Dashboard/StyleTypes/package":[97,3,61],"./Dashboard/StyleTypes/package.json":[97,3,61],"./Dashboard/Toolbar":[37,9,0,3],"./Dashboard/Toolbar/":[37,9,0,3],"./Dashboard/Toolbar/_style.scss":[155,7,89],"./Dashboard/Toolbar/index":[37,9,0,3],"./Dashboard/Toolbar/index.tsx":[37,9,0,3],"./Dashboard/Toolbar/package":[98,3,62],"./Dashboard/Toolbar/package.json":[98,3,62],"./Dashboard/_main.scss":[156,7,90],"./Dashboard/draft.db":[75,3,63],"./Dashboard/draft.db.json":[75,3,63],"./Dashboard/index":[50,9,20],"./Dashboard/index.tsx":[50,9,20],"./Footer":[21,9,14],"./Footer/":[21,9,14],"./Footer/_style.scss":[157,7,91],"./Footer/index":[21,9,14],"./Footer/index.tsx":[21,9,14],"./Footer/package":[99,3,64],"./Footer/package.json":[99,3,64],"./Header":[39,9,36],"./Header/":[39,9,36],"./Header/_style.scss":[158,7,92],"./Header/index":[39,9,36],"./Header/index.tsx":[39,9,36],"./Header/package":[100,3,65],"./Header/package.json":[100,3,65],"./Home":[51,9,8],"./Home/":[51,9,8],"./Home/index":[51,9,8],"./Home/index.tsx":[51,9,8],"./Home/package":[101,3,66],"./Home/package.json":[101,3,66],"./Jumbotron":[33,9,23],"./Jumbotron/":[33,9,23],"./Jumbotron/_style.scss":[159,7,93],"./Jumbotron/index":[33,9,23],"./Jumbotron/index.tsx":[33,9,23],"./Jumbotron/package":[102,3,67],"./Jumbotron/package.json":[102,3,67],"./LatestPost":[40,9,27],"./LatestPost/":[40,9,27],"./LatestPost/_style.scss":[160,7,94],"./LatestPost/index":[40,9,27],"./LatestPost/index.tsx":[40,9,27],"./LatestPost/package":[103,3,68],"./LatestPost/package.json":[103,3,68],"./Layout":[22,9,10],"./Layout/":[22,9,10],"./Layout/index":[22,9,10],"./Layout/index.tsx":[22,9,10],"./Layout/package":[104,3,69],"./Layout/package.json":[104,3,69],"./Loading":[41,9,37],"./Loading/":[41,9,37],"./Loading/_style.scss":[161,7,105],"./Loading/index":[41,9,37],"./Loading/index.tsx":[41,9,37],"./Loading/package":[105,3,70],"./Loading/package.json":[105,3,70],"./Login":[52,9,15],"./Login/":[52,9,15],"./Login/_style.scss":[162,7,95],"./Login/index":[52,9,15],"./Login/index.tsx":[52,9,15],"./Login/package":[106,3,71],"./Login/package.json":[106,3,71],"./Modal":[17,9,38],"./Modal/":[17,9,38],"./Modal/_style.scss":[163,7,96],"./Modal/index":[17,9,38],"./Modal/index.tsx":[17,9,38],"./Modal/package":[107,3,72],"./Modal/package.json":[107,3,72],"./Navbar":[20,9,22],"./Navbar/":[20,9,22],"./Navbar/_style.scss":[164,7,97],"./Navbar/index":[20,9,22],"./Navbar/index.tsx":[20,9,22],"./Navbar/package":[108,3,73],"./Navbar/package.json":[108,3,73],"./Post":[53,9,0,1,7],"./Post/":[53,9,0,1,7],"./Post/_style.scss":[165,7,98],"./Post/index":[53,9,0,1,7],"./Post/index.tsx":[53,9,0,1,7],"./Post/package":[109,3,74],"./Post/package.json":[109,3,74],"./PostBlock":[28,9,28],"./PostBlock/":[28,9,28],"./PostBlock/_style.scss":[166,7,106],"./PostBlock/index":[28,9,28],"./PostBlock/index.tsx":[28,9,28],"./PostBlock/package":[110,3,75],"./PostBlock/package.json":[110,3,75],"./Signup":[54,9,16],"./Signup/":[54,9,16],"./Signup/index":[54,9,16],"./Signup/index.tsx":[54,9,16],"./Signup/package":[111,3,76],"./Signup/package.json":[111,3,76],"./Subscription":[19,9,19],"./Subscription/":[19,9,19],"./Subscription/_style.scss":[167,7,107],"./Subscription/index":[19,9,19],"./Subscription/index.tsx":[19,9,19],"./Subscription/package":[112,3,77],"./Subscription/package.json":[112,3,77],"./Table":[26,9,39],"./Table/":[26,9,39],"./Table/index":[26,9,39],"./Table/index.tsx":[26,9,39],"./Table/package":[113,3,78],"./Table/package.json":[113,3,78]};function n(e){if(!t.o(o,e))return Promise.resolve().then((function(){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=o[e],n=a[0];return Promise.all(a.slice(2).map(t.e)).then((function(){return t.t(n,a[1])}))}n.keys=function(){return Object.keys(o)},n.id=135,e.exports=n},14:function(e,a,t){"use strict";var o=t(12),n=t(0),s=t.n(n),r=t(1),c={isLoggedIn:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SIGNIN_ERROR":case"SIGNUP_ERROR":return Object(r.a)({},e,{error:a.payload});case"SIGNIN_SUCCESS":return Object(r.a)({},e,{id:a.payload.id,isLoggedIn:!0,error:null});case"LOGOUT_USER":return Object(r.a)({},e,{isLoggedIn:!1,error:null});case"SET_AUTH":return Object(r.a)({},e,{isLoggedIn:a.payload.auth});default:return e}},i=t(4);t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return u}));var l=Object(n.createContext)({}),u=function(e){var a,t=e.children,r=Object(n.useReducer)(d,c),u=Object(o.a)(r,2),p=u[0],b=u[1],h={authState:p,authDispatch:b,authService:(a=b,{signup:function(e){i.a.post("/signup",e).then((function(e){a({type:"SIGNIN_SUCCESS",payload:e.data})})).catch((function(e){a({type:"SET_ERRORS",payload:e.message})}))},signin:function(e){i.a.post("/login",e).then((function(e){a({type:"SIGNIN_SUCCESS",payload:e.data})})).catch((function(e){a({type:"SET_ERRORS",payload:e.message})}))},logout:function(){i.a.get("/logout").then((function(){a({type:"LOGOUT_USER"})})).catch((function(e){console.log(e)}))},authenticate:function(){i.a.get("/auth").then((function(e){a({type:"SET_AUTH",payload:e.data})})).catch((function(e){console.log(e)}))}})};return s.a.createElement(l.Provider,{value:h},t)}},140:function(e,a,t){},141:function(e,a,t){"use strict";t.r(a);var o=t(0),n=t.n(o),s=t(58),r=t.n(s),c=t(18),d=t(14),i=t(10),l=(t(140),t(13)),u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(n.a.createElement(d.b,null,n.a.createElement(l.b,null,n.a.createElement(c.a,null,n.a.createElement(i.default,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");u?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):p(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):p(a,e)}))}}()},4:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(15),n=t.n(o).a.create({withCredentials:!0,baseURL:"/api"})}},[[114,80,81]]]);
//# sourceMappingURL=main.ea1beb44.chunk.js.map