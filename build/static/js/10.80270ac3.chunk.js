(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[10,11,13],{52:function(t,e,n){"use strict";n.r(e),n.d(e,"Media",(function(){return o}));var r=n(0),a=n.n(r);function c(t){return t.src?a.a.createElement("img",{src:t.src,alt:"upload to cloud"}):null}function o(t){var e=t.contentState.getEntity(t.block.getEntityAt(0)),n=e.getData().src,r=e.getType(),o=a.a.createElement(a.a.Fragment,null);return"image"===r&&(o=a.a.createElement(c,{src:n})),o}},58:function(t,e,n){"use strict";n.r(e),n.d(e,"mediaBlockRenderer",(function(){return a}));var r=n(52);function a(t){return"atomic"===t.getType()?{component:r.Media,editable:!1}:null}},70:function(t,e,n){"use strict";n.r(e),n.d(e,"RichEditor",(function(){return g}));var r=n(8),a=n(0),c=n.n(a),o=n(151),i=n(63),d=n(4),u=n(58),l=n(13),s=n(9),m=n(31);function g(t){var e=Object(a.useContext)(d.a),n=e.data,g=e.dataDispatch,h=new m.a(g),f=t.blogId?n.blogs.filter((function(e){return e.id===t.blogId.id}))[0]:null,b=f?o.EditorState.createWithContent(Object(o.convertFromRaw)(JSON.parse(f.content))):o.EditorState.createEmpty(),p=Object(a.useState)(b),y=Object(r.a)(p,2),E=y[0],v=y[1],C=Object(l.g)(),k=Object(a.createRef)(),R=function(){k.current&&k.current.focus()},S=function(t){v(t)},O=E.getCurrentContent(),j="RichEditor-editor";return O.hasText()||"unstyled"!==O.getBlockMap().first().getType()&&(j+=" RichEditor-hidePlaceholder"),c.a.createElement("div",{className:"editor"},c.a.createElement("div",{className:"RichEditor"},c.a.createElement(i.Toolbar,{variant:t.blogId?"Save":"Publish",onAddImage:function(t){var e="https://res.cloudinary.com/".concat("maryam47web","/image/upload/").concat(t,".jpg"),n=E.getCurrentContent().createEntity("image","IMMUTABLE",{src:e}),r=n.getLastCreatedEntityKey(),a=o.EditorState.set(E,{currentContent:n});v(o.AtomicBlockUtils.insertAtomicBlock(a,r," ")),setTimeout((function(){return R()}),0)},editorState:E,handleChange:S,handleSave:function(e){return function(){var r=E.getCurrentContent(),a=JSON.stringify(Object(o.convertToRaw)(r));Object(s.g)(a)?"Publish"===e?(h.createNewPost({content:a,userId:n.users[0]._id}),C.push("/dashboard/posts")):(h.updatePost(t.blogId.id,a),C.push("/dashboard/posts")):R()}}}),c.a.createElement("div",{className:j,onClick:R},c.a.createElement(o.Editor,{ref:k,blockStyleFn:s.f,blockRendererFn:u.mediaBlockRenderer,editorState:E,handleKeyCommand:function(t,e){var n=o.RichUtils.handleKeyCommand(e,t);return n?(S(n),"handled"):"not-handled"},keyBindingFn:function(t){if(9===t.keyCode){var e=o.RichUtils.onTab(t,E,4);return e!==E&&S(e),null}return Object(o.getDefaultKeyBinding)(t)},onChange:S,placeholder:"Tell a story..."}))))}}}]);
//# sourceMappingURL=10.80270ac3.chunk.js.map