(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[54],{10:function(t,e,o){"use strict";var a=o(12),n=o(0),s=o.n(n),r=o(1),c={isLoggedIn:!1},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SIGNIN_ERROR":case"SIGNUP_ERROR":return Object(r.a)({},t,{error:e.payload});case"SIGNIN_SUCCESS":return Object(r.a)({},t,{id:e.payload.id,isLoggedIn:!0,error:null});case"LOGOUT_USER":return Object(r.a)({},t,{isLoggedIn:!1,error:null});case"SET_AUTH":return Object(r.a)({},t,{isLoggedIn:e.payload.auth});default:return t}},l=o(4);o.d(e,"a",(function(){return u})),o.d(e,"b",(function(){return d}));var u=Object(n.createContext)({}),d=function(t){var e,o=t.children,r=Object(n.useReducer)(i,c),d=Object(a.a)(r,2),b=d[0],p=d[1],h={authState:b,authDispatch:p,authService:(e=p,{signup:function(t){l.a.post("/signup",t).then((function(t){e({type:"SIGNIN_SUCCESS",payload:t.data})})).catch((function(t){e({type:"SET_ERRORS",payload:t.message})}))},signin:function(t){l.a.post("/login",t).then((function(t){e({type:"SIGNIN_SUCCESS",payload:t.data})})).catch((function(t){e({type:"SET_ERRORS",payload:t.message})}))},logout:function(){l.a.get("/logout").then((function(){e({type:"LOGOUT_USER"})})).catch((function(t){console.log(t)}))},authenticate:function(){l.a.get("/auth").then((function(t){e({type:"SET_AUTH",payload:t.data})})).catch((function(t){console.log(t)}))}})};return s.a.createElement(u.Provider,{value:h},o)}},102:function(t,e,o){},103:function(t,e,o){"use strict";o.r(e);var a=o(0),n=o.n(a),s=o(22),r=o.n(s),c=o(17),i=o(10),l=o(14),u=(o(102),o(13)),d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var o=t.installing;null!=o&&(o.onstatechange=function(){"installed"===o.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}r.a.render(n.a.createElement(i.b,null,n.a.createElement(u.b,null,n.a.createElement(c.a,null,n.a.createElement(l.App,null)))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");d?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(o){var a=o.headers.get("content-type");404===o.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):b(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):b(e,t)}))}}()},13:function(t,e,o){"use strict";var a=o(12),n=o(0),s=o.n(n),r=o(1),c={isFetched:!1,blogs:[],users:[],gallery:[]};var i=function(t,e){switch(e.type){case"FETCH_USERS":return Object(r.a)({},t,{users:e.payload});case"UPDATE_USER":return Object(r.a)({},t,{users:t.users.map((function(t){return t._id!==e.payload.userId?t:e.payload}))});case"UPDATE_USER_IMAGE":var o=t.users.filter((function(t){return t._id===e.payload.userId}))[0];return o.imageUrl=e.payload.obj.imageUrl,Object(r.a)({},t,{users:t.users.map((function(t){return t._id!==e.payload.userId?t:o}))});case"FETCH_POSTS":return Object(r.a)({},t,{blogs:(s=e.payload,s.sort((function(t,e){return Number(new Date(e.createdAt))-Number(new Date(t.createdAt))})))});case"POSTS_FECHED":return Object(r.a)({},t,{isFetched:!0});case"FETCH_GALLERY":return Object(r.a)({},t,{gallery:e.payload});case"SET_AVATAR":return Object(r.a)({},t);case"ADD_GALLERY":return Object(r.a)({},t,{gallery:t.gallery.concat(e.payload)});case"ADD_POST":return Object(r.a)({},t,{blogs:t.blogs.concat(e.payload)});case"EDIT_POST":return Object(r.a)({},t,{blogs:t.blogs.map((function(t){return t.id!==e.payload.id?t:e.payload}))});case"REMOVE_POST":return Object(r.a)({},t,{blogs:t.blogs.filter((function(t){return t.id!==e.payload}))});case"REMOVE_IMAGE":return Object(r.a)({},t,{gallery:t.gallery.filter((function(t){return t.public_id!==e.payload}))});case"ADD_COMMENT":var a=t.blogs.filter((function(t){return t.id===e.payload.post}))[0];return a.comments=a.comments.concat(e.payload),Object(r.a)({},t,{blogs:t.blogs.map((function(t){return t.id===e.payload._id?a:t}))});case"REMOVE_COMMENT":var n=t.blogs.filter((function(t){return t.id===e.payload.post}))[0];return n.comments=n.comments.filter((function(t){return t._id!==e.payload._id})),Object(r.a)({},t,{blogs:t.blogs.map((function(t){return t.id===e.payload.post?n:t}))});case"ERROR_MESSAGE":return Object(r.a)({},t);default:return function(t){throw new Error("Unexpected object: "+t)}(e)}var s},l=o(16),u=o.n(l),d=o(4);o.d(e,"a",(function(){return b})),o.d(e,"b",(function(){return p}));var b=Object(n.createContext)({}),p=function(t){var e,o=t.children,r=Object(n.useReducer)(i,c),l=Object(a.a)(r,2),p=l[0],h=l[1],f={data:p,dataDispatch:h,dataService:(e=h,{getPosts:function(){d.a.get("/posts").then((function(t){e({type:"FETCH_POSTS",payload:t.data})})).catch((function(t){console.log(t)}))},getGallery:function(){u.a.get("https://res.cloudinary.com/".concat("maryam47web","/image/list/xmas.json")).then((function(t){e({type:"FETCH_GALLERY",payload:t.data.resources})})).catch((function(t){console.log(t)}))},createNewPost:function(t){d.a.post("/posts",t).then((function(t){e({type:"ADD_POST",payload:t.data})})).catch((function(t){console.log(t)}))},updatePost:function(t,o){d.a.put("/posts/".concat(t),{content:o}).then((function(t){e({type:"EDIT_POST",payload:t.data})})).catch((function(t){console.log(t)}))},removePost:function(t){d.a.delete("/posts/".concat(t)).then((function(){e({type:"REMOVE_POST",payload:t})}))},getUsers:function(){d.a.get("/users").then((function(t){e({type:"FETCH_USERS",payload:t.data})}))},updateUser:function(t,o,a){console.log(o),d.a.put("/users/".concat(t),{obj:o,publicId:a}).then((function(t){t.data._id?e({type:"UPDATE_USER",payload:t.data}):e({type:"ERROR_MESSAGE",payload:t.data})})).catch((function(t){console.log(t)}))},removeAssets:function(t){d.a.post("/assets",t).then((function(t){console.log(t.data)}))},removeImage:function(t){d.a.delete("/assets/".concat(t)).then((function(){e({type:"REMOVE_IMAGE",payload:t})}))},addComment:function(t){d.a.post("/comments",t).then((function(t){e({type:"ADD_COMMENT",payload:t.data})})).catch((function(t){console.log(t)}))},removeComment:function(t){d.a.delete("/comments/".concat(t)).then((function(t){e({type:"REMOVE_COMMENT",payload:t.data})})).catch((function(t){console.log(t)}))}})};return s.a.createElement(b.Provider,{value:f},o)}},14:function(t,e,o){"use strict";o.r(e),o.d(e,"App",(function(){return i}));var a=o(0),n=o.n(a),s=o(10),r=o(13),c=o(15);function i(){var t=Object(a.useContext)(s.a).authService,e=Object(a.useContext)(r.a).dataService;return Object(a.useEffect)((function(){t.authenticate(),e.getPosts(),e.getGallery(),e.getUsers()}),[]),n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(c.Routes,null))}},15:function(t,e,o){"use strict";o.r(e),o.d(e,"Routes",(function(){return f}));var a=o(35),n=o(3),s=o(0),r=o.n(s),c=o(10),i=function(t){return Object(s.lazy)((function(){return o(97)("./".concat(t,"/").concat(t)).then((function(e){return{default:e[t]}}))}))},l=i("Blog"),u=i("Post"),d=i("Login"),b=i("Home"),p=i("About"),h=i("Dashboard");function f(){var t=Object(s.useContext)(c.a).authState.isLoggedIn;return r.a.createElement(n.d,null,r.a.createElement(n.b,{exact:!0,path:"/",component:b}),r.a.createElement(n.b,{exact:!0,path:"/login",component:d}),r.a.createElement(n.b,{exact:!0,path:"/about",component:p}),r.a.createElement(n.b,{exact:!0,path:"/blog",component:l}),r.a.createElement(n.b,{exact:!0,path:"/blog/:id",component:function(t){return t?r.a.createElement(u,t):null}}),r.a.createElement((function(e){var o=e.component,s=e.path,c=Object(a.a)(e,["component","path"]);return r.a.createElement(n.b,{path:s,render:function(e){return t?r.a.createElement(o,Object.assign({},e,c)):r.a.createElement(n.a,{to:{pathname:"/login",state:{from:e.location}}})}})}),{path:"/dashboard",component:function(t){var e=t.match;return r.a.createElement(h,{match:e})}}))}},4:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var a=o(16),n=o.n(a).a.create({withCredentials:!0,baseURL:"/api"})},76:function(t,e,o){t.exports=o(103)},97:function(t,e,o){var a={"./About/About":[70,9,22],"./About/About.tsx":[70,9,22],"./About/_style.scss":[113,7,57],"./AddComment/AddComment":[53,9,48],"./AddComment/AddComment.tsx":[53,9,48],"./App/App":[14,9],"./App/App.tsx":[14,9],"./Blog/Blog":[71,9,19],"./Blog/Blog.tsx":[71,9,19],"./BlogBody/BlogBody":[62,9,25],"./BlogBody/BlogBody.tsx":[62,9,25],"./BlogBody/_style.scss":[114,7,58],"./Button/Button":[36,9,49],"./Button/Button.tsx":[36,9,49],"./Button/_style.scss":[115,7,59],"./CardPost/CardPost":[55,9,30],"./CardPost/CardPost.tsx":[55,9,30],"./CardPost/_style.scss":[116,7,60],"./Comment/Comment":[63,9,32],"./Comment/Comment.tsx":[63,9,32],"./Comment/_style.scss":[117,7,69],"./Dashboard/CommentList/CommentList":[56,9,4],"./Dashboard/CommentList/CommentList.tsx":[56,9,4],"./Dashboard/CommentList/_style.scss":[104,7,42],"./Dashboard/Dashboard":[64,9,31],"./Dashboard/Dashboard.tsx":[64,9,31],"./Dashboard/Gallery/Gallery":[45,9,5],"./Dashboard/Gallery/Gallery.tsx":[45,9,5],"./Dashboard/Gallery/_style.scss":[105,7,43],"./Dashboard/HeaderStyleDropdown/HeaderStyleDropdown":[39,9,7],"./Dashboard/HeaderStyleDropdown/HeaderStyleDropdown.tsx":[39,9,7],"./Dashboard/Media/Media":[48,9,8],"./Dashboard/Media/Media.tsx":[48,9,8],"./Dashboard/MediaBlockRenderer/MediaBlockRenderer":[50,9,6],"./Dashboard/MediaBlockRenderer/MediaBlockRenderer.tsx":[50,9,6],"./Dashboard/Nav/Nav":[58,9,41],"./Dashboard/Nav/Nav.tsx":[58,9,41],"./Dashboard/Nav/_style.scss":[106,7,35],"./Dashboard/PctureChoice/PctureChoice":[41,9,9],"./Dashboard/PctureChoice/PctureChoice.tsx":[41,9,9],"./Dashboard/PctureChoice/_style.scss":[107,7,44],"./Dashboard/PostTable/PostTable":[65,9,2],"./Dashboard/PostTable/PostTable.tsx":[65,9,2],"./Dashboard/PostTable/_style.scss":[108,7,36],"./Dashboard/Preview/Preview":[66,9,0,1,3],"./Dashboard/Preview/Preview.tsx":[66,9,0,1,3],"./Dashboard/Profile/Profile":[59,9,24],"./Dashboard/Profile/Profile.tsx":[59,9,24],"./Dashboard/Profile/_style.scss":[109,7,37],"./Dashboard/RichEditor/RichEditor":[60,9,0,11],"./Dashboard/RichEditor/RichEditor.tsx":[60,9,0,11],"./Dashboard/RichEditor/_style.scss":[110,7,45],"./Dashboard/StyleButton/StyleButton":[38,9,17],"./Dashboard/StyleButton/StyleButton.tsx":[38,9,17],"./Dashboard/StyleTypes/StyleTypes":[42,9,15],"./Dashboard/StyleTypes/StyleTypes.tsx":[42,9,15],"./Dashboard/Toolbar/Toolbar":[49,9,0,13],"./Dashboard/Toolbar/Toolbar.tsx":[49,9,0,13],"./Dashboard/Toolbar/_style.scss":[111,7,38],"./Dashboard/_main.scss":[112,7,39],"./Dashboard/draft.db":[57,3,10],"./Dashboard/draft.db.json":[57,3,10],"./Footer/Footer":[44,9,26],"./Footer/Footer.tsx":[44,9,26],"./Footer/_style.scss":[118,7,61],"./Header/Header":[67,9,50],"./Header/Header.tsx":[67,9,50],"./Header/_style.scss":[119,7,62],"./Home/Home":[72,9,21],"./Home/Home.tsx":[72,9,21],"./Jumbotron/Jumbotron":[61,9,40],"./Jumbotron/Jumbotron.tsx":[61,9,40],"./Jumbotron/_style.scss":[120,7,63],"./LatestPost/LatestPost":[68,9,46],"./LatestPost/LatestPost.tsx":[68,9,46],"./LatestPost/_style.scss":[121,7,64],"./Layout/Layout":[47,9,23],"./Layout/Layout.tsx":[47,9,23],"./Loading/Loading":[69,9,51],"./Loading/Loading.tsx":[69,9,51],"./Loading/_style.scss":[122,7,70],"./Login/Login":[73,9,28],"./Login/Login.tsx":[73,9,28],"./Login/_style.scss":[123,7,65],"./Modal/Modal":[37,9,52],"./Modal/Modal.tsx":[37,9,52],"./Modal/_style.scss":[124,7,66],"./Navbar/Navbar":[43,9,34],"./Navbar/Navbar.tsx":[43,9,34],"./Navbar/_style.scss":[125,7,67],"./Post/Post":[74,9,0,1,20],"./Post/Post.tsx":[74,9,0,1,20],"./Post/_style.scss":[126,7,68],"./PostBlock/PostBlock":[54,9,47],"./PostBlock/PostBlock.tsx":[54,9,47],"./PostBlock/_style.scss":[127,7,71],"./Routes/Routes":[15,9],"./Routes/Routes.tsx":[15,9],"./Signup/Signup":[75,9,29],"./Signup/Signup.tsx":[75,9,29],"./Subscription/Subscription":[40,9,33],"./Subscription/Subscription.tsx":[40,9,33],"./Subscription/_style.scss":[128,7,72],"./Table/Table":[51,9,53],"./Table/Table.tsx":[51,9,53]};function n(t){if(!o.o(a,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],n=e[0];return Promise.all(e.slice(2).map(o.e)).then((function(){return o.t(n,e[1])}))}n.keys=function(){return Object.keys(a)},n.id=97,t.exports=n}},[[76,55,56]]]);
//# sourceMappingURL=main.d7a6301e.chunk.js.map